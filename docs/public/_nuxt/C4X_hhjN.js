import{_ as P}from"./B5Ce8ktC.js";import{_ as U,e as j,q as z,r as k,g as T,j as D,l as H,c as y,o as p,b as V,w as q,a as e,s as x,t as l,x as Z,v as E,y as K,f as _}from"./CrDc-1X1.js";import{u as R}from"./DRPA9Kg8.js";const W={class:"modern-car-card"},G={class:"image-container"},J={class:"image-wrapper"},N=["src","alt"],Q={key:0,class:"photo-count-badge"},X={class:"year-badge"},Y={class:"status-text"},tt={key:0,class:"status-icon"},et={key:1,class:"status-icon"},st={key:2,class:"status-icon"},at={class:"card-content"},rt={class:"title-section"},nt={class:"car-title"},ot={class:"make"},ct={class:"model"},it={class:"specs-grid"},lt={class:"spec-item"},ut={class:"spec-item"},dt={class:"spec-item"},ft={class:"spec-item color-spec"},mt={class:"price-section"},gt={class:"price-label"},ht={class:"price-value"},yt={class:"action-section"},pt={class:"view-details-btn"},vt={__name:"CarCard",props:{car:{type:Object,required:!0}},setup(r){const u=r,n=j({useScope:"global"}),{t:m,locale:i}=n,M=z(),v=k(!1),s=t=>{try{if(n&&n.te&&n.te(t))return m(t);const a=n.getLocaleMessage&&n.getLocaleMessage(i.value)||{},h=t.split(".");let o=a;for(const f of h)if(o&&Object.prototype.hasOwnProperty.call(o,f))o=o[f];else{o=null;break}if(o)return o;o=n.getLocaleMessage&&n.getLocaleMessage("en")||{};for(const f of h)if(o&&Object.prototype.hasOwnProperty.call(o,f))o=o[f];else{o=null;break}return o||t}catch{return t}},c=async t=>{try{if(!t)return!1;const a=n.getLocaleMessage&&n.getLocaleMessage(t)||{};if(a&&a.nav&&a.nav.home)return!0;const h=new AbortController,o=setTimeout(()=>h.abort(),1500);try{const f=await fetch(`/locales/${t}.json`,{signal:h.signal});if(f&&f.ok){const I=await f.json();return n.setLocaleMessage&&n.setLocaleMessage(t,I),clearTimeout(o),!0}}catch{}finally{clearTimeout(o)}const b=n.getLocaleMessage&&n.getLocaleMessage("en")||{};if(b&&b.nav&&b.nav.home)return!0}catch{}return!1};T(()=>{c(i.value).catch(()=>{})}),D(i,t=>{c(t).catch(()=>{})});const d=H(()=>u.car.images&&u.car.images.length>1),g=()=>{v.value=!v.value,console.log("Favorite toggled:",u.car.id)},O=()=>{if(u.car.images&&u.car.images.length>0){const t=u.car.images[0].image;return L(t)}return L(u.car.image)},L=t=>t?typeof t=="string"&&t.startsWith("http")?t:"http://127.0.0.1:8000/media/"+t:'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="600" height="400"><rect width="100%" height="100%" fill="%236676ea"/><text x="50%" y="50%" fill="white" font-size="24" font-family="Arial, Helvetica, sans-serif" text-anchor="middle" alignment-baseline="middle">No image</text></svg>',C={hy:"hy-AM",ru:"ru-RU",en:"en-US"},S=t=>typeof t=="number"?new Intl.NumberFormat(C[i.value]||"en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t):t,B=t=>{const a=s("carDetail.mileageUnit");return typeof t=="number"?`${new Intl.NumberFormat(C[i.value]||"en-US").format(t)} ${a}`:`${t} ${a}`},$=t=>{if(!t)return"#667eea";if(typeof t=="object"){if(t.hex)return t.hex;t=t.name||t.label||t.code||""}return{Õ½Ö‡:"#1a1a1a",Õ½ÕºÕ«Õ¿Õ¡Õ¯:"#f5f5f5",Õ¯Õ¡Ö€Õ´Õ«Ö€:"#e53e3e",Õ¯Õ¡ÕºÕ¸Ö‚ÕµÕ¿:"#3182ce",Õ´Õ¸Õ­Ö€Õ¡Õ£Õ¸Ö‚ÕµÕ¶:"#718096",Õ¡Ö€Õ®Õ¡Õ©Õ¡Õ£Õ¸Ö‚ÕµÕ¶:"#cbd5e0",Õ¯Õ¡Õ¶Õ¡Õ¹:"#38a169",Õ¤Õ¥Õ²Õ«Õ¶:"#ecc94b",black:"#1a1a1a",white:"#f5f5f5",red:"#e53e3e",blue:"#3182ce",gray:"#718096",silver:"#cbd5e0",green:"#38a169",yellow:"#ecc94b"}[(t||"").toLowerCase()]||"#667eea"},A=t=>{switch(t){case"armenia":return"status-armenia";case"transit":return"status-transit";case"auction":return"status-auction";default:return""}},w=t=>t==null?"":typeof t=="object"?t.name||t.label||t.title||t.code||"":String(t),F=t=>{switch(t){case"armenia":return m("carDetail.statusArmenia");case"transit":return m("carDetail.statusTransit");case"auction":return m("carDetail.statusAuction");default:return""}};return(t,a)=>{const h=P;return p(),y("article",W,[V(h,{to:_(M)(`/cars/${r.car.id}`),class:"card-link"},{default:q(()=>[e("div",G,[e("div",J,[e("img",{src:O(),alt:`${r.car.make} ${r.car.model}`,class:"car-image",loading:"lazy"},null,8,N),d.value?(p(),y("div",Q,l(r.car.images.length),1)):x("",!0),a[0]||(a[0]=e("div",{class:"image-overlay"},null,-1))]),e("div",X,[a[1]||(a[1]=e("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})],-1)),e("span",null,l(r.car.year),1)]),e("button",{class:"favorite-btn",onClick:Z(g,["prevent"])},[...a[2]||(a[2]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z","stroke-width":"2"})],-1)])]),r.car.status?(p(),y("div",{key:0,class:E(["status-tag",A(r.car.status)])},[e("span",Y,l(F(r.car.status)),1),r.car.status==="armenia"?(p(),y("span",tt,"ðŸ ")):r.car.status==="transit"?(p(),y("span",et,"ðŸšš")):r.car.status==="auction"?(p(),y("span",st,"ðŸ”¨")):x("",!0)],2)):x("",!0)]),e("div",at,[e("div",rt,[e("h3",nt,[e("span",ot,l(r.car.make.toUpperCase()),1),e("span",ct,l(r.car.model),1)])]),e("div",it,[e("div",lt,[a[3]||(a[3]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("circle",{cx:"12",cy:"12",r:"10","stroke-width":"2"}),e("path",{d:"M12 6v6l4 2","stroke-width":"2","stroke-linecap":"round"})],-1)),e("span",null,l(B(r.car.mileage)),1)]),e("div",ut,[a[4]||(a[4]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M7 7h10M7 12h10M7 17h6","stroke-width":"2","stroke-linecap":"round"})],-1)),e("span",null,l(w(r.car.transmission)),1)]),e("div",dt,[a[5]||(a[5]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6","stroke-width":"2","stroke-linecap":"round"})],-1)),e("span",null,l(w(r.car.fuel)),1)]),e("div",ft,[e("div",{class:"color-dot",style:K({backgroundColor:$(r.car.color)})},null,4),e("span",null,l(w(r.car.color)),1)])]),a[7]||(a[7]=e("div",{class:"divider"},null,-1)),e("div",mt,[e("div",gt,l(_(m)("carDetail.priceLabel")),1),e("div",ht,l(S(r.car.price)),1)]),e("div",yt,[e("div",pt,[e("span",null,l(s("carDetail.viewDetails")),1),a[6]||(a[6]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{d:"M5 12h14M12 5l7 7-7 7","stroke-width":"2","stroke-linecap":"round"})],-1))])])])]),_:1},8,["to"])])}}},wt=U(vt,[["__scopeId","data-v-bd35aec4"]]),xt=()=>{const r=k([]),u=k(!1),n=k(null),{locale:m}=j(),i=(s,c)=>{if(s==null)return"";if(typeof s=="string")return s;if(Array.isArray(s)){for(const d of s){const g=i(d,c);if(g)return g}return""}if(typeof s=="object"){if(c&&Object.prototype.hasOwnProperty.call(s,c)&&typeof s[c]=="string")return s[c];for(const d of["name","label","title","text","content","html","value"])if(Object.prototype.hasOwnProperty.call(s,d)&&typeof s[d]=="string")return s[d];for(const d in s)if(Object.prototype.hasOwnProperty.call(s,d)){const g=i(s[d],c);if(g)return g}return""}return String(s)},M=s=>{const c=m.value||"hy";return{...s,make:i(s.make,c)||s.make||"",model:i(s.model,c)||s.model||"",description:i(s.description,c)||s.description||"",color:i(s.color,c)||s.color||"",fuel:i(s.fuel,c)||s.fuel||"",transmission:i(s.transmission,c)||s.transmission||""}},v=async()=>{u.value=!0,n.value=null;try{const{data:s}=await R("http://127.0.0.1:8000/api/cars/",{query:{lang:m.value}},"$tyINZK1ysr");s.value&&(r.value=s.value.map(M))}catch(s){n.value=s}finally{u.value=!1}};return D(m,()=>{v()}),{cars:r,loading:u,error:n,fetchCars:v}};export{wt as C,xt as u};
